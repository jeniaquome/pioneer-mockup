@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 222.2 47.4% 11.2%;
    --muted: 210 40% 96.1%;
    --muted-foreground: 215.4 16.3% 46.9%;
    --popover: 0 0% 100%;
    --popover-foreground: 222.2 47.4% 11.2%;
    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;
    --card: 0 0% 100%;
    --card-foreground: 222.2 47.4% 11.2%;
    --primary: 222.2 47.4% 11.2%;
    --primary-foreground: 210 40% 98%;
    --secondary: 210 40% 96.1%;
    --secondary-foreground: 222.2 47.4% 11.2%;
    --accent: 210 40% 96.1%;
    --accent-foreground: 222.2 47.4% 11.2%;
    --destructive: 0 100% 50%;
    --destructive-foreground: 210 40% 98%;
    --ring: 215 20.2% 65.1%;
    --radius: 0.5rem;
  }
 
  .dark {
    --background: 224 71% 4%;
    --foreground: 213 31% 91%;
    --muted: 223 47% 11%;
    --muted-foreground: 215.4 16.3% 56.9%;
    --accent: 216 34% 17%;
    --accent-foreground: 210 40% 98%;
    --popover: 224 71% 4%;
    --popover-foreground: 215 20.2% 65.1%;
    --border: 216 34% 17%;
    --input: 216 34% 17%;
    --card: 224 71% 4%;
    --card-foreground: 213 31% 91%;
    --primary: 210 40% 98%;
    --primary-foreground: 222.2 47.4% 1.2%;
    --secondary: 222.2 47.4% 11.2%;
    --secondary-foreground: 210 40% 98%;
    --destructive: 0 63% 31%;
    --destructive-foreground: 210 40% 98%;
    --ring: 216 34% 17%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground font-sans;
  }
  h1 {
    @apply text-brand-h1 font-brand-heading;
  }
  h2 {
    @apply text-brand-h2 font-brand-subheading;
  }
  h3 {
    @apply text-brand-h3 font-brand-subheading;
  }
  h4 {
    @apply text-brand-h4 font-brand-subheading;
  }
}

@layer components {
  /* Responsive hero background placement to keep buildings clear of text */
  .hero-bg {
    /* Use optimized JPEG instead of heavy SVG (191KB vs 7.6MB - 97% reduction) */
    background-image: url('/branding/assets/hero-0-optimized.jpg');
    background-repeat: no-repeat;
    background-size: cover;
    /* Anchor to the top so skyline is never cropped */
    background-position: center top;
    /* Prefer small viewport height units to avoid mobile URL bar issues */
    min-height: clamp(70svh, 90svh, 100svh);
  }

  /* Slightly shift the image as screens get wider to keep the bridge and buildings lower */
  @media (min-width: 640px) { /* sm */
    .hero-bg {
      background-position: center 6%;
    }
  }

  @media (min-width: 768px) { /* md */
    .hero-bg {
      background-position: center 10%;
    }
  }

  @media (min-width: 1024px) { /* lg */
    .hero-bg {
      background-position: center 14%;
    }
  }

  @media (min-width: 1280px) { /* xl */
    .hero-bg {
      background-position: center 18%;
    }
  }

  @media (min-width: 1536px) { /* 2xl */
    .hero-bg {
      background-position: center 22%;
    }
  }

  /* Pittsburgh Tomorrow Brand Typography Classes */
  .brand-heading-primary {
    @apply font-brand-heading font-black italic text-brand-reflex-blue;
    text-transform: capitalize; /* Sentence/Title case only per guidelines */
  }
  
  .brand-heading-hero {
    @apply font-brand-heading font-black italic text-brand-hero;
    text-transform: capitalize;
  }
  
  .brand-subheading {
    @apply font-brand-subheading font-bold text-brand-reflex-blue;
    text-transform: capitalize;
  }
  
  .brand-accent {
    @apply font-brand-accent font-medium;
  }
  
  .brand-accent-caps {
    @apply font-brand-accent font-semibold uppercase tracking-wide;
  }

  /* Text handling utilities for multilingual support */
  .text-responsive {
    word-wrap: break-word;
    overflow-wrap: break-word;
    hyphens: auto;
    -webkit-hyphens: auto;
    -moz-hyphens: auto;
    -ms-hyphens: auto;
  }

  .text-adaptive {
    @apply text-responsive;
    /* Prevent single words from becoming too large on mobile */
    max-width: 100%;
    /* Ensure consistent line height across languages */
    line-height: 1.4;
  }

  /* Viewport-based text sizing for hero elements */
  .hero-text-responsive {
    font-size: clamp(1.5rem, 4vw, 4rem);
    line-height: 1.2;
  }

  .hero-subtitle-responsive {
    font-size: clamp(1rem, 2.5vw, 2.5rem);
    line-height: 1.4;
  }

  /* Prefer balanced wrapping for long headings/hero copy */
  .text-balance {
    text-wrap: balance;
  }

  /* Interactive Element Cursor Behaviors - Per Brand Guidelines */
  .interactive-element {
    @apply cursor-pointer;
  }
  
  .interactive-element:disabled,
  .disabled-element {
    @apply cursor-not-allowed opacity-50;
  }
  
  .text-selectable {
    @apply cursor-text;
  }
  
  .non-interactive {
    @apply cursor-default;
  }

  /* Brand Color Utility Classes */
  .bg-brand-primary {
    @apply bg-brand-reflex-blue;
  }
  
  .bg-brand-secondary {
    @apply bg-brand-pms-285;
  }
  
  .text-brand-primary {
    @apply text-brand-reflex-blue;
  }
  
  .border-brand-primary {
    @apply border-brand-reflex-blue;
  }

  /* Interactive State Classes */
  .btn-brand-primary {
    @apply bg-brand-reflex-blue text-white font-brand-accent font-semibold px-6 py-3 rounded-lg cursor-pointer transition-all duration-200;
  }
  
  .btn-brand-primary:hover {
    @apply bg-brand-pms-285 shadow-lg transform scale-105;
  }
  
  .btn-brand-secondary {
    @apply bg-brand-pms-285 text-white font-brand-accent font-semibold px-6 py-3 rounded-lg cursor-pointer transition-all duration-200;
  }
  
  .btn-brand-secondary:hover {
    @apply bg-brand-reflex-blue shadow-lg transform scale-105;
  }
  
  .btn-brand-outline {
    @apply border-2 border-brand-reflex-blue text-brand-reflex-blue bg-transparent font-brand-accent font-semibold px-6 py-3 rounded-lg cursor-pointer transition-all duration-200;
  }
  
  .btn-brand-outline:hover {
    @apply bg-brand-reflex-blue text-white shadow-lg transform scale-105;
  }

  /* Brand Category Colors - Consistent across all components */
  .category-housing {
    @apply bg-brand-pms-285/20 text-brand-pms-285 border-brand-pms-285/30;
  }
  
  .category-healthcare {
    @apply bg-brand-pms-179/20 text-brand-pms-179 border-brand-pms-179/30;
  }
  
  .category-employment {
    @apply bg-brand-pms-267/20 text-brand-pms-267 border-brand-pms-267/30;
  }
  
  .category-education {
    @apply bg-brand-pms-354/20 text-brand-pms-354 border-brand-pms-354/30;
  }
  
  .category-legal {
    @apply bg-brand-pms-265/20 text-brand-pms-265 border-brand-pms-265/30;
  }
  
  .category-social {
    @apply bg-brand-pms-129/20 text-brand-pms-129 border-brand-pms-129/30;
  }
  
  .category-emergency {
    @apply bg-brand-pms-3955/20 text-brand-pms-129 border-brand-pms-3955/30;
  }
  
  .category-transportation {
    @apply bg-brand-pms-382/20 text-brand-pms-354 border-brand-pms-382/30;
  }
  
  .category-default {
    @apply bg-brand-pms-290 text-brand-reflex-blue border-brand-pms-285/30;
  }

  /* Priority Colors */
  .priority-urgent {
    @apply bg-brand-pms-179/20 text-brand-pms-179 border-brand-pms-179/30;
  }
  
  .priority-high {
    @apply bg-brand-pms-129/20 text-brand-pms-129 border-brand-pms-129/30;
  }
  
  .priority-medium {
    @apply bg-brand-pms-3955/20 text-brand-pms-129 border-brand-pms-3955/30;
  }
  
  .priority-low {
    @apply bg-brand-pms-354/20 text-brand-pms-354 border-brand-pms-354/30;
  }

  /* Container utilities for flexible layouts */
  .container-responsive {
    width: 100%;
    max-width: 100%;
    margin-left: auto;
    margin-right: auto;
    padding-left: 1rem;
    padding-right: 1rem;
  }

  @media (min-width: 475px) {
    .container-responsive {
      padding-left: 1.5rem;
      padding-right: 1.5rem;
    }
  }

  @media (min-width: 640px) {
    .container-responsive {
      max-width: 640px;
      padding-left: 2rem;
      padding-right: 2rem;
    }
  }

  @media (min-width: 768px) {
    .container-responsive {
      max-width: 768px;
    }
  }

  @media (min-width: 1024px) {
    .container-responsive {
      max-width: 1024px;
    }
  }

  @media (min-width: 1280px) {
    .container-responsive {
      max-width: 1280px;
    }
  }

  @media (min-width: 1536px) {
    .container-responsive {
      max-width: 1536px;
    }
  }

  /* Custom animations */
  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-fade-in {
    animation: fadeIn 0.5s ease-out;
  }

  /* ============================================
     RESPONSIVE DESIGN UTILITIES - Phase 1
     Mobile-first approach with systematic breakpoints
     ============================================ */

  /* Touch Target Utilities - WCAG 2.1 Level AA Compliance */
  .touch-target {
    min-width: 44px;
    min-height: 44px;
  }

  .touch-target-large {
    min-width: 48px;
    min-height: 48px;
  }

  /* Prevent horizontal overflow at all breakpoints */
  .no-overflow-x {
    overflow-x: hidden;
    max-width: 100%;
  }

  /* Responsive spacing utilities - mobile-first */
  .spacing-mobile {
    @apply px-4 py-4 gap-4;
  }

  @media (min-width: 768px) {
    .spacing-tablet {
      @apply px-6 py-6 gap-6;
    }
  }

  @media (min-width: 1024px) {
    .spacing-desktop {
      @apply px-8 py-8 gap-8;
    }
  }

  /* Responsive grid utilities */
  .grid-responsive {
    @apply grid grid-cols-1;
  }

  @media (min-width: 768px) {
    .grid-responsive-2 {
      @apply grid-cols-2;
    }
  }

  @media (min-width: 1024px) {
    .grid-responsive-3 {
      @apply grid-cols-3;
    }
  }

  /* Responsive typography utilities */
  .text-responsive-sm {
    font-size: clamp(0.875rem, 2vw, 1rem);
  }

  .text-responsive-base {
    font-size: clamp(1rem, 2.5vw, 1.125rem);
  }

  .text-responsive-lg {
    font-size: clamp(1.125rem, 3vw, 1.5rem);
  }

  .text-responsive-xl {
    font-size: clamp(1.25rem, 3.5vw, 1.875rem);
  }

  .text-responsive-2xl {
    font-size: clamp(1.5rem, 4vw, 2.25rem);
  }

  .text-responsive-3xl {
    font-size: clamp(1.875rem, 5vw, 3rem);
  }

  /* Container utilities with responsive max-widths */
  .container-mobile-first {
    width: 100%;
    margin-left: auto;
    margin-right: auto;
    padding-left: 1rem;
    padding-right: 1rem;
  }

  @media (min-width: 640px) {
    .container-mobile-first {
      max-width: 640px;
      padding-left: 1.5rem;
      padding-right: 1.5rem;
    }
  }

  @media (min-width: 768px) {
    .container-mobile-first {
      max-width: 768px;
      padding-left: 2rem;
      padding-right: 2rem;
    }
  }

  @media (min-width: 1024px) {
    .container-mobile-first {
      max-width: 1024px;
    }
  }

  @media (min-width: 1280px) {
    .container-mobile-first {
      max-width: 1280px;
    }
  }

  @media (min-width: 1536px) {
    .container-mobile-first {
      max-width: 1536px;
    }
  }

  /* Stack/Unstack utilities for flexible layouts */
  .stack-mobile {
    @apply flex flex-col gap-4;
  }

  @media (min-width: 768px) {
    .unstack-tablet {
      @apply flex-row;
    }
  }

  /* Card responsive utilities */
  .card-responsive {
    @apply p-4 rounded-lg;
  }

  @media (min-width: 768px) {
    .card-responsive {
      @apply p-6 rounded-xl;
    }
  }

  @media (min-width: 1024px) {
    .card-responsive {
      @apply p-8 rounded-2xl;
    }
  }

  /* Button responsive utilities */
  .btn-responsive {
    @apply px-4 py-2 text-sm;
    min-height: 44px;
  }

  @media (min-width: 768px) {
    .btn-responsive {
      @apply px-5 py-2.5 text-base;
      min-height: 44px;
    }
  }

  @media (min-width: 1024px) {
    .btn-responsive {
      @apply px-6 py-3 text-base;
      min-height: 48px;
    }
  }

  /* Safe area utilities for mobile notches and home indicators */
  .safe-area-top {
    padding-top: env(safe-area-inset-top);
  }

  .safe-area-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }

  .safe-area-left {
    padding-left: env(safe-area-inset-left);
  }

  .safe-area-right {
    padding-right: env(safe-area-inset-right);
  }

  /* Responsive visibility utilities */
  .hide-mobile {
    display: none;
  }

  @media (min-width: 768px) {
    .hide-mobile {
      display: block;
    }
    .show-mobile-only {
      display: none;
    }
  }

  .hide-tablet {
    @apply block;
  }

  @media (min-width: 768px) and (max-width: 1023px) {
    .hide-tablet {
      display: none;
    }
    .show-tablet-only {
      display: block;
    }
  }

  @media (max-width: 767px), (min-width: 1024px) {
    .show-tablet-only {
      display: none;
    }
  }

  .hide-desktop {
    @apply block;
  }

  @media (min-width: 1024px) {
    .hide-desktop {
      display: none;
    }
    .show-desktop-only {
      display: block;
    }
  }

  @media (max-width: 1023px) {
    .show-desktop-only {
      display: none;
    }
  }

  /* Image responsive utilities */
  .img-responsive {
    @apply w-full h-auto object-cover;
  }

  .img-contain-responsive {
    @apply w-full h-auto object-contain;
  }

  /* Aspect ratio utilities */
  .aspect-responsive-square {
    aspect-ratio: 1 / 1;
  }

  .aspect-responsive-video {
    aspect-ratio: 16 / 9;
  }

  .aspect-responsive-portrait {
    aspect-ratio: 3 / 4;
  }

  /* Line clamping for responsive text truncation */
  .line-clamp-responsive {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  @media (min-width: 768px) {
    .line-clamp-responsive {
      -webkit-line-clamp: 4;
    }
  }

  /* Prevent text selection on touch devices (for UI elements) */
  .no-select-touch {
    -webkit-user-select: none;
    user-select: none;
    -webkit-tap-highlight-color: transparent;
  }

  /* Smooth scrolling with momentum on iOS */
  .scroll-smooth-mobile {
    -webkit-overflow-scrolling: touch;
    scroll-behavior: smooth;
  }

  /* ============================================
     MOCKUP ANIMATIONS - Cinematic Effects
     ============================================ */

  /* Grain Texture Overlay */
  .grain-texture {
    background-image: url('data:image/svg+xml;utf8,<svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"><filter id="noiseFilter"><feTurbulence type="fractalNoise" baseFrequency="3" numOctaves="4" stitchTiles="stitch"/></filter><rect width="100%" height="100%" filter="url(%23noiseFilter)"/></svg>');
  }

  /* Keyframe Animations */
  @keyframes slideUp {
    from { opacity: 0; transform: translateY(80px); }
    to { opacity: 1; transform: translateY(0); }
  }

  @keyframes slideDown {
    from { opacity: 0; transform: translateY(-50px); }
    to { opacity: 1; transform: translateY(0); }
  }

  @keyframes slideRight {
    from { opacity: 0; transform: translateX(-50px); }
    to { opacity: 1; transform: translateX(0); }
  }

  @keyframes slowZoom {
    from { transform: scale(1.0); }
    to { transform: scale(1.15); }
  }

  @keyframes shimmer {
    0%, 100% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
  }

  @keyframes float {
    0%, 100% { transform: translate(0, 0) rotate(0deg); opacity: 0.2; }
    25% { transform: translate(10px, -20px) rotate(90deg); opacity: 0.4; }
    50% { transform: translate(-10px, -40px) rotate(180deg); opacity: 0.6; }
    75% { transform: translate(15px, -60px) rotate(270deg); opacity: 0.4; }
  }

  @keyframes float-slow {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-30px); }
  }

  @keyframes bounce-slow {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
  }

  @keyframes pulse-slow {
    0%, 100% { opacity: 1; transform: scale(1); }
    50% { opacity: 0.5; transform: scale(1.2); }
  }

  /* Animation Utility Classes */
  .animate-slide-up {
    animation: slideUp 1.4s cubic-bezier(0.16, 1, 0.3, 1) forwards;
    opacity: 0;
  }

  .animate-slide-down {
    animation: slideDown 1.2s cubic-bezier(0.16, 1, 0.3, 1) forwards;
    opacity: 0;
  }

  .animate-slide-right {
    animation: slideRight 1.4s cubic-bezier(0.16, 1, 0.3, 1) forwards;
    opacity: 0;
  }

  .animate-slow-zoom {
    animation: slowZoom 40s cubic-bezier(0.4, 0, 0.2, 1) infinite alternate;
  }

  .animate-shimmer {
    background-size: 200% 100%;
    animation: shimmer 3s ease-in-out infinite;
  }

  .animate-float {
    animation: float 20s ease-in-out infinite;
  }

  .animate-float-slow {
    animation: float-slow 6s ease-in-out infinite;
  }

  .animate-bounce-slow {
    animation: bounce-slow 3s ease-in-out infinite;
  }

  .animate-pulse-slow {
    animation: pulse-slow 3s ease-in-out infinite;
  }

  /* Animation Delays */
  .delay-300 { animation-delay: 0.3s; }
  .delay-500 { animation-delay: 0.5s; }
  .delay-700 { animation-delay: 0.7s; }

  /* Custom Gradient */
  .bg-gradient-radial {
    background: radial-gradient(circle, var(--tw-gradient-stops));
  }

  /* Smooth Scroll */
  html {
    scroll-behavior: smooth;
  }

  /* Custom Serif Font for Headlines */
  @import url('https://fonts.googleapis.com/css2?family=Crimson+Pro:ital,wght@0,300;0,400;0,600;0,700;1,300;1,400&display=swap');

  .font-serif {
    font-family: 'Crimson Pro', serif;
  }

  /* Hide scrollbar but allow scrolling */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }
}

/* ═══════════════════════════════════════════════════════════════════════════
   CHAT WIDGET BUTTON STYLING
═══════════════════════════════════════════════════════════════════════════ */

.open-iframe-btn {
  transition: transform 0.3s ease, box-shadow 0.3s ease !important;
}

/* Pulse ring effect */
.open-iframe-btn::after {
  content: '' !important;
  position: absolute !important;
  inset: 0 !important;
  border-radius: 50% !important;
  box-shadow: 0 0 0 0 rgba(244, 179, 61, 0.5) !important;
  animation: chatPulse 2.5s ease-out infinite !important;
  pointer-events: none !important;
}

@keyframes chatPulse {
  0% {
    box-shadow: 0 0 0 0 rgba(244, 179, 61, 0.5);
  }
  70% {
    box-shadow: 0 0 0 15px rgba(244, 179, 61, 0);
  }
  100% {
    box-shadow: 0 0 0 0 rgba(244, 179, 61, 0);
  }
}

.open-iframe-btn:hover {
  transform: scale(1.1) !important;
  box-shadow: 0 8px 25px rgba(46, 49, 146, 0.3) !important;
}
